## 正向代理与反向代理

#### 正向代理
只用于代理内部网络对Internet的连接请求。就是你明知道你无法直接访问服务器 A，需要指定服务，来让你能迂回的访问到服务器 A。比如你明明知道 Google 打不开，然后想要打开的时候，你用的服务对你来说就是正向代理。
你的机器 -> proxy/vpn -> 广阔天地，这个形容的还是挺好的，就是翻了墙，国外大把的网站任你飞。
说白了就是client与代理服务器在同一个局域网，可以直接互相访问

#### 反向代理
指以代理服务器来接受Internet上的连接请求。你需要访问一个服务，比如百度，你知道访问 baidu.com，也知道对应的 ip 是 14.215.177.37，但百度可能是用到内部的一个服务器 ip 192.168.0.2 来接受搜索的请求并返回结果，只是通过14.215.177.37 这个 ip 跟你进行交互，14.215.177.37 这个 ip 不提供搜索的服务，这个过程中的 14.215.177.37 就是反向代理了。而使用者在这个过程中是完全无感的，以为只是14.215.177.37处理自己的逻辑业务，但是实际上处理业务的是这个ip地址。
你的机器 <- proxy <- 某个网站的某个机器

![avatar](https://github.com/yangxiaoguai132/images/blob/master/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86.png)

通俗一点的理解就是，如果我们通过当我们有一个服务器集群，并且服务器集群中的每台服务器的内容一样的时候，同样我们要直接从个人电脑访问到服务器集群服务器的时候无法访问，必须通过第三方服务器才能访问集群
这个时候，我们通过第三方服务器访问服务器集群的内容，但是我们并不知道是哪一台服务器提供的内容，此种代理方式称为反向代理。

##### 反向代理的两个关键点：
>1.无法直接访问某个服务器集群，但是可以访问某一个第三方服务器
>2.我们只知道是访问的第三方服务器返回我们需要的资源，但是不知道是服务器集群中的哪一个机器给了我们需要的东西。

#### 常用的为什么要用nginx配置反向代理
##### 安全及权限：
使用反向代理后，用户端将无法直接通过请求访问真正的内容服务器，而必须首先通过Nginx。可以通过在Nginx层上将危险或者没有权限的请求内容过滤掉，从而保证了服务器的安全。
##### 负载均衡：
例如一个网站的内容被部署在若干台服务器上，可以把这些机子看成一个集群，那么Nginx可以将接收到的客户端请求“均匀地”分配到这个集群中所有的服务器上（内部模块提供了多种负载均衡算法），从而实现服务器压力的负载均衡。此外，nginx还带有健康检查功能（服务器心跳检查），会定期轮询向集群里的所有服务器发送健康检查请求，来检查集群中是否有服务器处于异常状态，一旦发现某台服务器异常，那么在以后代理进来的客户端请求都不会被发送到该服务器上（直到后面的健康检查发现该服务器恢复正常），从而保证客户端访问的稳定性。